# 开发日志

这篇readme会记录项目的详细开发历程，包括自己的思考和总结

## 打算重构shoot-bug

*2022-09-02*

这段期间，在研究tiptap来代替vue-quill-editor，我自己从零封装了一个顺手的[编辑器](https://github.com/hlz2516/z-tiptap-editor)

*2022-08-22*

这段期间，我借鉴stack overflow的整体布局，再加上我自己的思考，打算重构shoot-bug，目前重构了问题和用户两个页面。

另外，我发现在网站页面中有一些重复的元素，因此我将其封装为组件，比如SearchBar和SelectorGroup。像这种经常用到的组件，我打算以后封装进自己的包里然后发布出去，这样在别的项目中直接导入包就行。

加了个日间/夜间模式，熟悉了下css变量

父组件在给子组件传递本地图片路径时，子组件无法显示图片的问题？  
原因：在父组件src的值被当做是普通字符串传递给子组件，所以子组件不会把其当做路径处理  
解决：通过require()对路径字符串进行处理，require只能接受常量  

关于grid布局更新为响应式布局的解决方案，我写在了![我的独特审美学](https://github.com/hlz2516/my-personal-aesthetics)中。

我发现对于自定义事件不是很理解，在子组件中，通过某个元素真正的事件来调用触发自定义事件，而这个自定义事件名是一个字符串，在父组件中，只需要给子组件绑定v-on:自定义事件名="方法"，然后对这个元素做相应操作触发事件，继而就能触发在父组件中设定的方法。事实上，我能讲这么乱，就是因为我现在只是浅层理解。

我发现quill-editor有些东西不知道怎么设置，如字体大小，图片上传等功能。有时间研究一下

另外，我发现，每次写个页面写布局，就很烦效率也很低。对这种情况，要么搞几套通用模板，直接往上套，要么找个能像winform那样可视化开发布局。总之要找到一种可以提高开发效率的方法，否则要花费很多时间在布局和样式上。

## 重新审视shoot-bug

*2022-08-16*

shoot-bug是我在学完vue基础后想跟一位网友合作开发的一个小项目，其网站作用是给开发人员提供一个交流实际开发中遇到的问题的一个平台，类似stack overflow。项目大概从7月份开始，然后到8月份结束了第一个迭代周期，基本上只实现了登录注册，帖子列表，帖子详情，发帖与回帖这些功能。可以说，现在功能和页面都非常简陋，没法拿出去给人看。本来开发前，想了很多，比如极限编程的开发模式，git的开发模型，但因为小伙伴的中途退出这些东西都用不起来了。所以前端的所有东西都是我一人构建的，当然我不是说我多强（其实我现在挺菜的），只是我希望有个人能一起交流和学习，这样路上也不会太孤单。

说会正题，当初在设计时，说是模仿stack overflow，实际上只是说模仿它的主要功能，也就是编程问答，但实际上，我真的会用stack overflow么，恐怕不是，我只知道它是一个编程问答网站，遇到实际开发中的编程难题可以在这里找找答案，但说实话我一年都用不到几次这个网站，stack overflow很多具体的功能，我并不了解，所以今天的内容就是去彻底了解stack overflow（以下简称sof）里的各种功能和界面布局，去总结和分析，把哪些我们能做的，觉得是可以借鉴的功能，给提炼出来，作为我们项目的功能。（接下来分析的内容会非常多，废话也很多，可以直接跳过看总结）

### 整体布局

进入网站，先截个图

![sof主界面](.\log_images\sof主界面.jpg)

![sof主界面下](.\log_images\sof主界面下.jpg)

可以看到，sof整体采用的是一个比较传统的网站布局，header+aside+content+footer。色调以白色，黄色，橙色，蓝色为主。

### 局部布局与功能分析

**header**

![header](.\log_images\header.jpg)

最左侧图标，shoot-bug目前也有一个沙雕图标。搜索框左侧是一个products透明按钮，这个是与sof相关的其他产品，我们不做这个。搜索框必然要做不用讲。搜索框右侧第一个是用户头像和两个数字，这两个数字我分别解释一下，第一个黑色的数字，表示你的声望值，如果你回答了别人的问题，别人给你的回答投正票，你每得到一张正票，你的声望值就+1；第二个黄色的数字，表示你的徽章数（类似游戏中的成就），只要达到一些特定的要求，你就能获得指定的成就。我认为声望这个机制是可以借鉴的，但徽章机制有待斟酌。然后我们看下一个图标按钮，它点击后会显示一个Box

<img src=".\log_images\inbox_msg.jpg" alt="inbox_msg" style="zoom:50%;" />

显然这是一个消息盒。比如当你发表问题贴后，如果有人回答了你的问题，你的消息盒就会收到消息，说XXX回答了你的XXX问题，类似这样的。目前我有一个关于site tour的消息，于是我点进去，里面基本上是对sof的一些特点的介绍，下面我总结一下他说的特点：

1. 只搞Q&A，不闲聊。如何判定是不是闲聊？那必然有审核员呀，这一点shoot-bug也考虑到了，所以也有专门的审核员来做这个事。你可以问明确的编程问题，软件算法，编程技巧和软件开发工具相关的问题，但不要问那些你没有尝试去解决过的问题和容易引发争议的问题，不要在问题中夹带私货比如个人推荐或者产品之间的比较。

2. 投票机制。

   1. 好的答案会被投票选出，然后上升到最高层(Good answers are voted up and rise to the top.)，这样做的好处是，优质回答很容易被找到。

   2. 提问的人可以将一个答案标记为“接受”(The person who asked can mark one answer as "accepted")，接受并不意味着这是最好的答案，只是意味着它对提问的人有效。

3. 标签机制。所有的问题都会被带上标签，一个问题最多可以带5个主题相关的标签，点击任意一个标签可以查看带有该标签的问题列表。

4. 声望机制。当别人对你的问题或回答或编辑投正票时，你的声望值会上升。随着你的声望值的上升，你会解锁一些新的特权，比如投票权，评论甚至编辑别人的问题或回答。

   <img src=".\log_images\vote1.jpg" alt="vote1" style="zoom:80%;" />

6. 徽章机制。徽章是你通过参与网站而获得的特殊成就。它们分为三个等级: 铜、银和金。

   

   OK，大致了解了下网站的特点。我们继续看下一个图标按钮，它是一个奖杯图标，意味着成就，点击它可以看到最近你获得的成就：

   <img src=".\log_images\achievements.jpg" alt="achievements" style="zoom: 67%;" />

   再往右是一个问号图标，点击它可以看到有一个列表，分别是site tour，help center等，我们可以模仿它搞个site tour和help center。

   ![help_center](.\log_images\help_center.jpg)

   最后是一个图标按钮是a list of all 181 stack exchange sites，不知道干嘛的，不是重点就不管它了

   

   **aside**

   <img src=".\log_images\aside.jpg" alt="aside" style="zoom:67%;" />

   最下面那个TEAMS是广告，可以直接忽略。一级菜单有home，questions，tags，users，companies。在效果上，aside与header一样采用的是fixed的定位方式。下面讲下各个菜单的功能：

   home:展示问题列表，按更新时间排序，仅一页

   questions:展示问题列表，是个分页列表，包含了网站上所有的问题，在过滤选项上比home更多一些

   tags:展示标签列表。点击某个标签item，会进入展示问题列表，只不过所有问题都是与这个标签相关的

   users:展示用户列表。点击某个用户Item，会进入其个人主页。

   companies:展示公司列表。这个对我们来说没什么用，不做。

   感觉没必要home和questions分开，两者都是展示问题列表，没有太大区别，所以我们还是做一个问题列表。

   在shoot-bug目前的设计中，问题列表是用户已发布的，而草稿列表是用户未发布的，但在sof中是没有草稿的设计的，也就是说，他是要么你就写好发表，要么你就不要写，反正不会给你缓存你还没写完的问题。那么，我们也要做成这样么，关于这一点，还需斟酌。

   

   **content**

   首先，看home子菜单项对应的content，在界面效果上可以看到，边界都是采用这种线条式的

   <img src=".\log_images\线条式.jpg" alt="线条式" style="zoom:67%;" />

   然后其实这个Top Questions大标签其实没必要，在你点击一级菜单home时，你就已经知道content出来的内容是一堆questions了。这个大标题搞出来不仅浪费了很多空间，ask question按钮的位置也有点奇怪，完全可以把按钮放到左下角，所以我打算我们的项目对其做一些布局上的改变，如下所示

   <img src=".\log_images\问题列表改动.jpg" alt="问题列表改动" style="zoom:67%;" />

   然后我们来看下问题列表

   <img src=".\log_images\问题列表.jpg" alt="问题列表" style="zoom: 67%;" />

   列表中的一个item还是包含了很多信息要素的，比如标题，标签，问题投票数，回答数，提问者是否已采纳，多少个人看过，提问者在多少时间前发表，或者谁在多少时间前修改过这个问题。不过我不知道为什么第一个item的背景颜色是黄色，它一定是有什么不一样的地方导致它变色了，不过我没研究出来是什么。

   在问题列表右侧，可以看到有一些卡片

   <img src=".\log_images\问题列表右侧.jpg" alt="问题列表右侧" style="zoom:50%;" />

   它开头是什么博客（不是用户写的），关于meta(一个与sof有关的论坛)的一些特性，反正不重要。我们可以搞一些自己的东西，比如公告，意见箱，热门问题排行榜。另外我还看到这个东西

   <img src=".\log_images\filters.jpg" alt="filters" style="zoom: 67%;" />

   这个东西还是有用的，主要是对想要回答的用户有用。当他想要找一些问题回答时，固定的想要的tags和想忽略的tags就排上用场了，这样他每次进到问题列表，不需要每次都手动设置过滤器。关于那个create a custom filter的功能，不知道能不能做，不过一般情况下watched tags和ignored tags就够用了。

   然后看下标签列表

   <img src=".\log_images\tags.jpg" alt="tags" style="zoom: 67%;" />

   

   列表采用的是卡片式布局，内部信息要素有标签名，对标签的详细介绍，有多少个与该标签相关的问题，今天以及这周有多少个与标签相关问题。虽然大标题浪费了空间，但下面对tag的一段解释让我觉得，这段解释对新用户还算有帮助，可以弥补浪费空间这个缺陷（但我们中文这样搞反而会感觉有点奇怪，所以还是删掉好了）。然后可以注意到有个show all tag synonyms，点进去可以看到很多标签的同义词的关联，比如swiper关联swiper.js，js关联javascript，因为sof在用户撰写问题时，其标签是用户自己写的而不是通过选择已有标签的形式，所以有同义词标签是正常现象。关于这个问题，我们也需要考虑一下如何解决。

   然后看下用户列表

   <img src=".\log_images\用户列表.jpg" alt="用户列表" style="zoom:67%;" />

   可以看到，与标签列表大同小异，不再赘述。

   

   好，那么第一层已经看完了，还有第二层，也就是，问题详情页，个人主页，问题编辑页等等。

   **问题详情页**

   <img src=".\log_images\问题详情.jpg" alt="问题详情" style="zoom: 67%;" />

   

   这个ask question的位置让我感觉很不舒服，问题列表和问题详情都有一个这个按钮，那还不如放到侧边栏里作为一个子菜单项。那些常规的信息元素就不讲了，主要讲讲不常规的。
   
   先看问题左侧那一排
   
   ![问题左侧](.\log_images\问题左侧.jpg)
   
   这个上下箭头就是你可以选择，投正票或者反票，表示投票者对这个问题的好坏的评价，下面那个小旗帜的图标是一个bookmark，表示收藏，点击后会把该问题收录到自己的收藏夹中。再下面那个闹钟的图标，它是个历史记录表，点进去后你可以看到这篇帖子从发表以来的改动记录。
   
   然后再关注下蓝色区域
   
   ![蓝色区域](.\log_images\蓝色区域.jpg)
   
   这里出现了一个sof独有的概念：bounty。是这样的，如果一个问题发布后长时间没有人来回答，而该问题对提问者来说非常重要且急迫，那么提问者可以放一个bounty到该问题上，但是创建一个bounty的代价是，需要花费一部分声望（这个声望不一定非要提问者支付，提问者也可以寻找拥有大量声望值的人帮其支付），花费的量从50到500自己选择，每次递增或递减以50为基础。所以一个bounty的价值就是花费的声望值。
   
   在问题发布2天后，才能在该问题上挂载bounty。bounty的持续时间为1~7天，具体多少天由bounty创建者决定。如果在bounty持续时间内，有让提问者满意的回答，那么提问者可以主动把Bounty给到那个回答者，他会获得bounty代表的全额声望，这也意味着提问者接受了他的回答；如果bounty过了持续时间，提问者没有主动把bounty奖赏给指定的回答者，那么系统会看，提问者有没有接受了谁的回答，如果接受了，那么也把bounty全额奖励给那个回答者；如果没有接受的，系统会自动找到最高票回答（票数>=2）给其bounty代表的声望值的一半；如果有两个最高票回答，且票数相同，则选择回答时间较早的那个；如果没有合适的回答，那么没有人会获得声望值。（注意，bounty也不会退还给创建bounty的人，bounty是不可退还的，参考原文：A bounty is a special reputation award given to answers. It is funded by the personal reputation of the user who offers it, and is **non-refundable**. ）
   
   然后我们来看下问题末尾
   
   <img src=".\log_images\问题末尾.jpg" alt="问题末尾" style="zoom: 67%;" />
   
   主要关注三个，share,edit和follow，share就是会给出一个分享链接，edit就是你可以编辑问题，当然，你没有一定的声望值是没有权限编辑的，follow的话就是如果该问题后续有任何变化，那么你也会收到通知。
   
   
   
   然后我们来看下回答的区域
   
   <img src=".\log_images\回答界面.jpg" alt="回答界面" style="zoom:67%;" />
   
   可以看到，也有个投票组件和历史记录表，右边就是回答内容。与问题一样，回答也有share,edit和follow。其实我觉得，没必要将问题和回答的share和follow分开，为每条问题和回答都设置这样的一个链接啊，难道还有人只单独关注一个问题或者只关注一个回答？所以我的想法是，我们的shoot-bug就在问题下面放一个share和follow，至于edit的话，看我们要不要加入这个编辑他人问题或回答的机制；然后share给出这篇帖子的链接，follow的话，这篇帖子有任何改动，follow的人都会收到消息。
   
   然后我们看编辑器部分
   
   <img src=".\log_images\编辑器.jpg" alt="编辑器" style="zoom:50%;" />
   
   让我没想到的是，居然是markdown编辑器，这我就纠结了，markdown编辑器虽然预览效果可以，但麻烦了用户，我还是推荐使用传统编辑器，让用户体验更方便和高效。
   
   最后看下问题详情页的右侧部分
   
   <img src=".\log_images\问题详情右侧.jpg" alt="问题详情右侧" style="zoom:50%;" />
   
   可以看到有related也就是一个相关问题列表，这个东西还是有用的可以借鉴。其他的我看了下都没什么卵用，就这样把
   
   
   
   **问题编辑页**
   
   ![问题编辑](.\log_images\问题编辑.jpg)
   
   就还挺常规的，右侧是一些提示因素提示你该怎么写。不过在写tags时我发现，也不完全是用户自己写
   
   <img src=".\log_images\tag模式.jpg" alt="tag模式" style="zoom:67%;" />
   
   你每写入一个字符，它会以你当前写的字符串作为子字符串去它的tags表里查找，将结果返回以tags列表呈现；当你点击列表中的某个item时，那么当前字符串就会变成对应item的标签。所以它也不完全是用户自己写，为了避免出现同义词标签，它还是搞了个辅助的东西。
   
   
   
   **个人主页**
   
   <img src=".\log_images\个人主页.jpg" alt="个人主页" style="zoom:80%;" />
   
   仔细观察，会发现搜索框内内容为user:9710892，这是我的个人ID，实际上就是通过搜索个人ID来跳到用户主页的；还有像如果你要搜某个标签的问题列表比如javascript，可以在搜索框中输入[javascript]。
   
   个人主页内可以看到有三个标签分别是profile，activity和settings，我们一个个分析。
   
   profile
   
   点击profile，可以看到各种卡片，先来看第一张。
   
   <img src=".\log_images\profile卡片1.jpg" alt="profile卡片1" style="zoom:67%;" />
   
   可以看到，reputation声望值，reached表示关于你的浏览数(人们浏览你的帖子的次数+人们浏览你的高票答案的次数)，answers和questions就不用说了。
   
   有个about me，也就是对自己的一个介绍
   
   <img src=".\log_images\profile_about.jpg" alt="profile_about" style="zoom: 33%;" />
   
   有个badges，也就是徽章。里面的内容就是对应的徽章图标和你的徽章数量。
   
   <img src=".\log_images\profile徽章.jpg" alt="profile徽章" style="zoom: 33%;" />
   
   
   
   有个Posts,表示你发布的帖子和你回答过的帖子的一个集合
   
   <img src=".\log_images\profile_posts.jpg" alt="profile_posts" style="zoom:50%;" />
   
   ### 总结
   
   1. stack overflow在布局上比较传统，采用线条式区分板块，主题色调为白色，橙色，蓝色和黄色。
   2. stack overflow有其自己的一套玩法(机制)，主要包括声望与特权，投票，成就机制
   3. stack overflow有一个bounty的概念，当你想要一个问题得到更多他人的关注时，可以给这个问题挂载一个bounty
   
   
   
   ### 一些需要共同探讨的问题
   
   1. stack overflow是没有草稿的。也就是说，你要么写完一个问题直接发布，要么就没有这个问题，反正不会缓存你未发布的问题。我们这个项目也要这样做么
   2. 关于标签的同义词。当发布的问题数量大了后，其同义的标签必然也会出现，比如js和javascript，两者指的是同一个东西。sof的做法是把同义词关联的任务交给用户来做，让声望高的用户主动去把一些同义词关联起来，我们也要这样做么
   3. bounty是一个好的机制，我认为可以借鉴到我们项目中，bounty中文翻译过来是慷慨之举或奖金，可是听着感觉有点low，不知道中文取个什么别名比较好
   4. sof的声望与特权机制。可以看一下这个[声望值与对应解锁的特权](https://stackoverflow.com/help/privileges)，感觉有些特权不太合理，达到2000分可以编辑别人的问题或回答，达到10000分可以使用审核员的工具，删除别人的帖子。。不过一般人也达不到这么高的声望。但它为了这些特权也做了很多用户暂时用不到的功能，从程序员角度看，就是做了一堆不必要的功能，浪费时间与精力。对于这个特权，我的想法是，我们可以设计一些用户可能达到的声望值与对应的特权，但我们不要给那么牛逼的特权，比如使用审核员的工具，那你不就是半个审核员了么；还有他这个可以编辑别人的回答或问题，我挺纠结到底要不要做这个功能。关于特权这块，可以好好探讨下。
